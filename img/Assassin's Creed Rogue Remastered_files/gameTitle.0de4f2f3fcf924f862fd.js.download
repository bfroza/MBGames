(window.pswCommerceAnywhere=window.pswCommerceAnywhere||[]).push([[15],{247:function(e,t,n){"use strict";n.r(t);var r=n(27),a=n(24),o=n.n(a),i=n(3),c=n.n(i),l=n(0),u=n(336),d=n(1),p=n.n(d),s=n(2),f=n.n(s),m=n(17),y=n.n(m),v=n(16),g=n.n(v),b=n(11),h=n.n(b),O=n(8),w=n(101);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var I=function(e){y()(n,e);var t=P(n);function n(){return p()(this,n),t.apply(this,arguments)}return f()(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.children,a=n.qa,o=n.className;return l.g.createElement("h1",{className:Object(O.b)(o,"psw-t-title-l","psw-t-size-".concat((e=r,t=(e||"").length,t<=40?"8":t<=65?"7":"6")),"psw-l-line-break-word"),"data-qa":a},r)}}]),n}(l.d);I.defaultProps={className:"",children:"",qa:""};var j=I,D=n(352);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var T=function(e){y()(n,e);var t=N(n);function n(){return p()(this,n),t.apply(this,arguments)}return f()(n,[{key:"componentDidMount",value:function(){if("undefined"!=typeof window){var e=this.props,t=e.app.tagManager,n=e.name,r=e.id;t.fireTag("pageTurn",{product:{name:n,id:r}})}}},{key:"render",value:function(){var e=this.props,t=e.defaultProductName,n=e.format,r=e.gameLibraryLink,a=e.id,o=e.isProductInContextOwned,i=e.isSignedIn,c=e.name,u=e.ownedProductId,d=e.productTags,p=e.publisherName,s=e.qa,f=e.releaseDate,m=u,y=t||c,v=d.length>0,g=/^[0-9]{6,19}$/.test(a),b={},h=null;return i&&!o&&u&&(h=n("string","msgid_already_own_another_edition"))&&(g?(b.conceptId=a,b.conceptName=c):(b.productId=a,b.productName=c)),l.g.createElement("div",{className:"psw-c-bg-0","data-qa":s},l.g.createElement(j,{className:"psw-m-b-5",qa:"".concat(s,"#name")},y),l.g.createElement("div",{className:Object(O.b)("psw-t-overline","psw-t-bold"),"data-qa":"".concat(s,"#publisher")},p),f&&l.g.createElement("div",{className:Object(O.b)("psw-t-overline","psw-t-bold","psw-m-t-3"),"data-qa":"".concat(s,"#release-date")},f),v&&l.g.createElement(D.a,{qa:s,className:"psw-l-line-left psw-m-t-4"},d),l.g.createElement("div",{className:"psw-m-t-4"},h&&l.g.createElement(w.a,{chevron:!0,dataTrack:JSON.stringify({attributes:{assetName:"",elementType:"link",label:h,moduleName:"clickable link",linkURL:r,position:"1",productID:m,userActionFlag:!1},eventInfo:{eventAction:"click",eventName:"select already owned another edition link"}}),dataTrackClick:"gameTitle:viewAlreadyOwnedAnotherEdition",dataTelemetryMeta:JSON.stringify(b),href:r,qa:"".concat(s,"#additionalDescriptorLink"),target:r?"_blank":null},h)))}}]),n}(l.d);T.defaultProps={app:{},format:function(){return arguments.length<=1?void 0:arguments[1]},gameLibraryLink:"",isSignedIn:!1,id:"",isProductInContextOwned:!1,defaultProductName:"",ownedProductId:null,qa:"mfe-game-title",productTags:[],releaseDate:""};var E=T,k=n(44),R=n(14),q=n.n(R),S=n(12);function C(){var e=q()(["\n  fragment ProductTitle on Product {\n    id\n    edition {\n      name\n    }\n    name\n    platforms\n    publisherName\n    releaseDate\n    webctas {\n      # Required for computing the GameCTA id so apollo client can properly\n      # store the fields added here. Once the id field is added to Arkham GQL\n      # we can remove these fields.\n      id @client\n      type\n      action {\n        type\n        param {\n          name\n          value\n        }\n      }\n      meta {\n        preOrder\n      }\n    }\n  }\n"]);return C=function(){return e},e}var A=Object(S.gql)(C());function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(){var e=q()(["query conceptRetrieveForGameTitle($conceptId: String!) {\n  conceptRetrieve(conceptId: $conceptId) {\n    id\n    name\n    publisherName\n    defaultProduct {\n      ...ProductTitle\n    }\n    ownedTitles {\n      conceptId\n      id\n      name\n      platform\n      ctas {\n        type\n        action {\n          type\n          param {\n            name\n            values\n          }\n        }\n      }\n      media {\n        role\n        type\n        url\n        media {\n          role\n          type\n          url\n        }\n      }\n      titleBackwardsCompatibility {\n        category\n        titleId\n      }\n    }\n    releaseDate {\n      type\n      value\n    }\n  }\n}\n\n","\n"]);return U=function(){return e},e}var G=Object(S.gql)(U(),A),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conceptId,n=e.options;return L(L({},n),{},{query:G,variables:{conceptId:t}})};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(){var e=q()(["query productRetrieveForGameTitle($productId: String!) {\n  productRetrieve(productId: $productId) {\n    concept {\n      id\n      ownedTitles {\n        conceptId\n        id\n        name\n        platform\n        ctas {\n          type\n          action {\n            type\n            param {\n              name\n              values\n            }\n          }\n        }\n        media {\n          role\n          type\n          url\n          media {\n            role\n            type\n            url\n          }\n        }\n        titleBackwardsCompatibility {\n          category\n          titleId\n        }\n      }\n    }\n    ...ProductTitle\n  }\n}\n\n","\n"]);return M=function(){return e},e}var B=Object(S.gql)(M(),A),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.productId,n=e.options;return F(F({},n),{},{query:B,variables:{productId:t}})},J=function(e,t){var n=[];if(!e||!t)return null;for(var r=0;r<t.length;r+=1)for(var a=t[r].ctas,o=0;o<a.length;o+=1)for(var i=a[o].action.param,c=0;c<i.length;c+=1){var l=i[c],u=l.name,d=l.values;"entitlementIds"===u&&(n=n.concat(d))}return n.find((function(t){return t!==e}))},Q=function(e){return function(e){return-1!==(null==e?void 0:e.findIndex((function(e){return function(e){var t;return"PURCHASED"===(null==e?void 0:e.type)||"PREORDERED"===(null==e?void 0:e.type)||"DOWNLOAD"===(null==e||null===(t=e.action)||void 0===t?void 0:t.type)}(e)})))}(e)},z=function(e){var t,n,r=(e.data||{}).conceptRetrieve;if(!r)return{platforms:[],isEmpty:!0};var a=r.id,o=r.name,i=r.publisherName,c=r.releaseDate,l=(c=void 0===c?{}:c).value,u=c.type,d=r.defaultProduct,p=r.ownedTitles,s=d||{},f=s.id,m=s.name,y=s.releaseDate,v=s.platforms,g=s.publisherName,b=s.edition,h=s.webctas,O=o,w=y||l,P=u,I=d?null==h||null===(t=h[0])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.preOrder:null,j=g||i,D=v?v.map((function(e){return e.toUpperCase()})):[],N=null==b?void 0:b.name;N&&D.push(N);var T=!(O||j||w||D.length),E=J(f,p);return{defaultProductName:m,id:a,isProductInContextOwned:Q(h),name:O,ownedProductId:E,releaseDate:w,releaseDateType:P,publisherName:j,preOrder:I,productTags:D,isEmpty:T,ownedTitles:p}},W=function(e){var t,n,r=(e.data||{}).productRetrieve;if(!r)return{platforms:[],isEmpty:!0};var a=r.concept,o=r.edition,i=r.id,c=r.name,l=r.publisherName,u=r.platforms,d=r.releaseDate,p=r.webctas,s=null==p||null===(t=p[0])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.preOrder,f=null==o?void 0:o.name,m=null==a?void 0:a.ownedTitles,y=u?u.map((function(e){return e.toUpperCase()})):[],v=J(i,m),g=Q(p);return f&&y.push(f),{concept:a,id:i,isProductInContextOwned:g,name:c,ownedProductId:v,publisherName:l,releaseDate:d,productTags:y,preOrder:s,isEmpty:!(c||l||d||y.length)}},Z=n(139),K=function(e){var t=e.apolloClient,n=e.context,r=n.conceptId,a=n.productId,o=r?$:H,i=r?z:W;return t.addResolvers({GameCTA:{id:Z.a}}),{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.options;return t.query(o({conceptId:r,productId:a,options:n})).then(i)},get:function(e){var n;try{n=t.readQuery(o({conceptId:r,productId:a}),!0)}catch(e){return console.log("ERROR",e),null}var c=i({data:n});return e?Object(k.a)(c,e):c}}},V=function(e){var t=e.app,n=e.context,r=void 0===n?{}:n;return{gameTitle:K({apolloClient:t.apolloClient,context:r})}};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(r.default)("gameTitle",(function(e){var t=e.app,n=e.args,r=e.overrides,a=e.render;return{name:"gameTitle",core:V({app:t,context:n}),init:function(){!function(e){!function(e){e.telemetry.addSpec("gameTitle",{"click:viewAlreadyOwnedAnotherEdition":{make:function(e){var t=null,n=e.conceptId,r=e.conceptName,a=e.productId,o=e.productName;return n&&r?t={conceptId:n,conceptName:r}:a&&o&&(t={productId:a,productName:o}),{type:"Interaction",payload:{interactAction:"select already owned another edition link",interactCta:"you already owned another edition"},utData:{catalogInfo:t}}}}})}({telemetry:e.telemetry})}({telemetry:t.telemetry})},getInitialProps:function(){return this.core.gameTitle.fetch({options:{fetchPolicy:t.session.isUserSignedIn()?"network-only":"cache-first"}})},isEmpty:function(){return this.core.gameTitle.get("isEmpty")},render:function(e){var i=Y(Y(Y({},n),r),e),c=function(){return t.i18n.format("releaseDate",i.releaseDate,{type:i.releaseDateType,includeTimeZone:i.preOrder})},d=c();return a(l.g.createElement(E,o()({},i,{format:t.i18n.format,gameLibraryLink:t.config.get("client.downloadHref"),app:t,isSignedIn:t.session.isUserSignedIn(),releaseDate:"countdown"===d.type?l.g.createElement(u.a,{interval:1e3},(function(){return c().value})):d.value})))}}}))}},[[247,2,1,4,3,5,0]]]);