(window.pswCommerceAnywhere=window.pswCommerceAnywhere||[]).push([[13],{255:function(e,t,r){"use strict";r.r(t);var n=r(27),c=r(0),o=r(337),a=r(338),i=r(3),u=r.n(i),d=r(14),p=r.n(d),l=r(12),f=r(53);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(){var e=p()(["query conceptRetrieveForMedia($conceptId: String!) {\n  conceptRetrieve(conceptId: $conceptId) {\n    ...ConceptMedia\n    defaultProduct {\n      ...ProductMedia\n    }\n  }\n}\n\n","\n","\n"]);return m=function(){return e},e}var b=Object(l.gql)(m(),f.a,f.b),v=function(e){var t=e.conceptId;return O(O({},e.options),{},{query:b,variables:{conceptId:t}})};function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){var e=p()(["query productRetrieveForMedia($productId: String!) {\n  productRetrieve(productId: $productId) {\n    ...ProductMedia\n    concept {\n      ...ConceptMedia\n    }\n  }\n}\n\n","\n","\n"]);return j=function(){return e},e}var I=Object(l.gql)(j(),f.a,f.b),P=function(e){var t=e.productId;return y(y({},e.options),{},{query:I,variables:{productId:t}})},R=r(44);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){return(e||[]).reduce((function(e,t){return M(M({},e),{},u()({},t.role,t))}),{})},h=function(e){var t=e.productMediaByRole,r=e.conceptMediaByRole;return t.GAMEHUB_COVER_ART?t.GAMEHUB_COVER_ART:t.BACKGROUND?t.BACKGROUND:t.MASTER?{}:r.GAMEHUB_COVER_ART?r.GAMEHUB_COVER_ART:{}},A=function(e){var t=e.data,r=t.conceptRetrieve?Object(R.a)(t,"conceptRetrieve.defaultProduct"):Object(R.a)(t,"productRetrieve"),n=t.conceptRetrieve?Object(R.a)(t,"conceptRetrieve"):Object(R.a)(t,"productRetrieve.concept"),c=r||{},o=c.name,a=c.media,i=n||{},u=i.name,d=i.media,p=E(a),l=E(d);return{gameName:o||u,heroImageSrc:h({productMediaByRole:p,conceptMediaByRole:l}).url,tileImageSrc:(p.MASTER||{}).url}},C=function(e){var t,r="",n="",c=null,o=null;if(null==e||null===(t=e.data)||void 0===t?void 0:t.productRetrieve){var a=e.data.productRetrieve,i=a.id,u=a.media,d=a.concept;r="Product:".concat(i),c=u.filter((function(e){return"IMAGE"===e.type})),d&&(n="Concept:".concat(d.id),o=d.media.filter((function(e){return"IMAGE"===e.type})))}else{var p=e.data.conceptRetrieve,l=p.id,f=p.media,g=p.defaultProduct;if(n="Concept:".concat(l),o=f.filter((function(e){return"IMAGE"===e.type})),g){var O=g.id,m=g.media;r="Product:".concat(O),c=m.filter((function(e){return"IMAGE"===e.type}))}}return{productFragmentId:r,conceptFragmentId:n,updatedProductMedia:c,updatedConceptMedia:o}},B=function(e){return e.conceptId?v(e):P(e)},D=function(e){var t=e.apolloClient,r=e.context,n=e.isNonImgMediaFilterEnabled,c=r.conceptId,o=r.productId;return{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.options,a=B({conceptId:c,productId:o,options:r});return t.query(a).then((function(e){if(!n)return A(e);var r=C(e),c=r.productFragmentId,o=r.conceptFragmentId,i=r.updatedProductMedia,u=r.updatedConceptMedia;c&&i&&t.writeFragment({id:c,fragment:f.b,data:{media:i}}),o&&u&&t.writeFragment({id:o,fragment:f.a,data:{media:u}});var d=t.readQuery(a);return A({data:d})}))},get:function(){var e;try{e=t.readQuery(B({conceptId:c,productId:o}),!0)}catch(e){return console.log("ERROR",e),null}return A({data:e})}}},S=function(e){var t=e.app,r=e.context,n=void 0===r?{}:r;return{gameBackgroundImage:D({apolloClient:t.apolloClient,context:n,isNonImgMediaFilterEnabled:t.config.get("feature.filterNonImageMedia")})}};Object(n.default)("gameBackgroundImage",(function(e){var t=e.app,r=e.args,n=e.overrides,i=e.render;return{name:"gameBackgroundImage",core:S({app:t,context:r}),getInitialProps:function(){return this.core.gameBackgroundImage.fetch()},render:function(e){var t=e.gameName,r=e.heroImageSrc,u=e.tileImageSrc,d=n.legacy?o.a:a.a;return i(c.g.createElement(d,{qa:"gameBackgroundImage",noOverlay:!0,heroImage:c.g.createElement("img",{src:r,alt:t}),tileImage:c.g.createElement("img",{src:u,alt:t})}))}}}))}},[[255,2,1,4,3,5,0]]]);